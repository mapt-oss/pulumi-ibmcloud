// *** WARNING: this file was generated by pulumi-language-nodejs. ***
// *** Do not edit by hand unless you're certain you know what you are doing! ***

import * as pulumi from "@pulumi/pulumi";
import * as inputs from "./types/input";
import * as outputs from "./types/output";
import * as utilities from "./utilities";

export class CodeEngineJob extends pulumi.CustomResource {
    /**
     * Get an existing CodeEngineJob resource's state with the given name, ID, and optional extra
     * properties used to qualify the lookup.
     *
     * @param name The _unique_ name of the resulting resource.
     * @param id The _unique_ provider ID of the resource to lookup.
     * @param state Any extra arguments used during the lookup.
     * @param opts Optional settings to control the behavior of the CustomResource.
     */
    public static get(name: string, id: pulumi.Input<pulumi.ID>, state?: CodeEngineJobState, opts?: pulumi.CustomResourceOptions): CodeEngineJob {
        return new CodeEngineJob(name, <any>state, { ...opts, id: id });
    }

    /** @internal */
    public static readonly __pulumiType = 'ibmcloud:index/codeEngineJob:CodeEngineJob';

    /**
     * Returns true if the given object is an instance of CodeEngineJob.  This is designed to work even
     * when multiple copies of the Pulumi SDK have been loaded into the same process.
     */
    public static isInstance(obj: any): obj is CodeEngineJob {
        if (obj === undefined || obj === null) {
            return false;
        }
        return obj['__pulumiType'] === CodeEngineJob.__pulumiType;
    }

    /**
     * Reference to a build that is associated with the job.
     */
    declare public /*out*/ readonly build: pulumi.Output<string>;
    /**
     * Reference to a build run that is associated with the job.
     */
    declare public /*out*/ readonly buildRun: pulumi.Output<string>;
    /**
     * References to config maps, secrets or literal values, which are defined and set by Code Engine and are exposed as environment variables in the job run.
     */
    declare public /*out*/ readonly computedEnvVariables: pulumi.Output<outputs.CodeEngineJobComputedEnvVariable[]>;
    /**
     * The timestamp when the resource was created.
     */
    declare public /*out*/ readonly createdAt: pulumi.Output<string>;
    /**
     * The version of the job instance, which is used to achieve optimistic locking.
     */
    declare public /*out*/ readonly entityTag: pulumi.Output<string>;
    declare public /*out*/ readonly etag: pulumi.Output<string>;
    /**
     * When you provision a new job,  a URL is created identifying the location of the instance.
     */
    declare public /*out*/ readonly href: pulumi.Output<string>;
    /**
     * The name of the image that is used for this job. The format is `REGISTRY/NAMESPACE/REPOSITORY:TAG` where `REGISTRY` and `TAG` are optional. If `REGISTRY` is not specified, the default is `docker.io`. If `TAG` is not specified, the default is `latest`. If the image reference points to a registry that requires authentication, make sure to also specify the property `imageSecret`.
     */
    declare public readonly imageReference: pulumi.Output<string>;
    /**
     * The name of the image registry access secret. The image registry access secret is used to authenticate with a private registry when you download the container image. If the image reference points to a registry that requires authentication, the job / job runs will be created but submitted job runs will fail, until this property is provided, too. This property must not be set on a job run, which references a job template.
     */
    declare public readonly imageSecret: pulumi.Output<string | undefined>;
    /**
     * The identifier of the resource.
     */
    declare public /*out*/ readonly jobId: pulumi.Output<string>;
    /**
     * The name of the job.
     */
    declare public readonly name: pulumi.Output<string>;
    /**
     * The ID of the project.
     */
    declare public readonly projectId: pulumi.Output<string>;
    /**
     * The region of the project the resource is located in. Possible values: 'au-syd', 'br-sao', 'ca-tor', 'eu-de', 'eu-gb', 'jp-osa', 'jp-tok', 'us-east', 'us-south'.
     */
    declare public /*out*/ readonly region: pulumi.Output<string>;
    /**
     * The type of the job.
     */
    declare public /*out*/ readonly resourceType: pulumi.Output<string>;
    /**
     * Set arguments for the job that are passed to start job run containers. If not specified an empty string array will be applied and the arguments specified by the container image, will be used to start the container.
     */
    declare public readonly runArguments: pulumi.Output<string[] | undefined>;
    /**
     * The user ID (UID) to run the job.
     */
    declare public readonly runAsUser: pulumi.Output<number | undefined>;
    /**
     * Set commands for the job that are passed to start job run containers. If not specified an empty string array will be applied and the command specified by the container image, will be used to start the container.
     */
    declare public readonly runCommands: pulumi.Output<string[] | undefined>;
    /**
     * References to config maps, secrets or literal values, which are exposed as environment variables in the job run.
     */
    declare public readonly runEnvVariables: pulumi.Output<outputs.CodeEngineJobRunEnvVariable[] | undefined>;
    /**
     * The mode for runs of the job. Valid values are `task` and `daemon`. In `task` mode, the `maxExecutionTime` and `retryLimit` properties apply. In `daemon` mode, since there is no timeout and failed instances are restarted indefinitely, the `maxExecutionTime` and `retryLimit` properties are not allowed.
     */
    declare public readonly runMode: pulumi.Output<string | undefined>;
    /**
     * The name of the service account. For built-in service accounts, you can use the shortened names `manager`, `none`, `reader`, and `writer`. This property must not be set on a job run, which references a job template.
     */
    declare public readonly runServiceAccount: pulumi.Output<string | undefined>;
    /**
     * Optional mounts of config maps or secrets.
     */
    declare public readonly runVolumeMounts: pulumi.Output<outputs.CodeEngineJobRunVolumeMount[] | undefined>;
    /**
     * Define a custom set of array indices as a comma-separated list containing single values and hyphen-separated ranges, such as  5,12-14,23,27. Each instance gets its array index value from the environment variable JOB_INDEX. The number of unique array indices that you specify with this parameter determines the number of job instances to run.
     */
    declare public readonly scaleArraySpec: pulumi.Output<string | undefined>;
    /**
     * Optional amount of CPU set for the instance of the job. For valid values see [Supported memory and CPU combinations](https://cloud.ibm.com/docs/codeengine?topic=codeengine-mem-cpu-combo).
     */
    declare public readonly scaleCpuLimit: pulumi.Output<string | undefined>;
    /**
     * Optional amount of ephemeral storage to set for the instance of the job. The amount specified as ephemeral storage, must not exceed the amount of `scaleMemoryLimit`. The units for specifying ephemeral storage are Megabyte (M) or Gigabyte (G), whereas G and M are the shorthand expressions for GB and MB. For more information see [Units of measurement](https://cloud.ibm.com/docs/codeengine?topic=codeengine-mem-cpu-combo#unit-measurements).
     */
    declare public readonly scaleEphemeralStorageLimit: pulumi.Output<string | undefined>;
    /**
     * The maximum execution time in seconds for runs of the job. This property can only be specified if `runMode` is `task`.
     */
    declare public readonly scaleMaxExecutionTime: pulumi.Output<number | undefined>;
    /**
     * Optional amount of memory set for the instance of the job. For valid values see [Supported memory and CPU combinations](https://cloud.ibm.com/docs/codeengine?topic=codeengine-mem-cpu-combo). The units for specifying memory are Megabyte (M) or Gigabyte (G), whereas G and M are the shorthand expressions for GB and MB. For more information see [Units of measurement](https://cloud.ibm.com/docs/codeengine?topic=codeengine-mem-cpu-combo#unit-measurements).
     */
    declare public readonly scaleMemoryLimit: pulumi.Output<string | undefined>;
    /**
     * The number of times to rerun an instance of the job before the job is marked as failed. This property can only be specified if `runMode` is `task`.
     */
    declare public readonly scaleRetryLimit: pulumi.Output<number | undefined>;

    /**
     * Create a CodeEngineJob resource with the given unique name, arguments, and options.
     *
     * @param name The _unique_ name of the resource.
     * @param args The arguments to use to populate this resource's properties.
     * @param opts A bag of options that control this resource's behavior.
     */
    constructor(name: string, args: CodeEngineJobArgs, opts?: pulumi.CustomResourceOptions)
    constructor(name: string, argsOrState?: CodeEngineJobArgs | CodeEngineJobState, opts?: pulumi.CustomResourceOptions) {
        let resourceInputs: pulumi.Inputs = {};
        opts = opts || {};
        if (opts.id) {
            const state = argsOrState as CodeEngineJobState | undefined;
            resourceInputs["build"] = state?.build;
            resourceInputs["buildRun"] = state?.buildRun;
            resourceInputs["computedEnvVariables"] = state?.computedEnvVariables;
            resourceInputs["createdAt"] = state?.createdAt;
            resourceInputs["entityTag"] = state?.entityTag;
            resourceInputs["etag"] = state?.etag;
            resourceInputs["href"] = state?.href;
            resourceInputs["imageReference"] = state?.imageReference;
            resourceInputs["imageSecret"] = state?.imageSecret;
            resourceInputs["jobId"] = state?.jobId;
            resourceInputs["name"] = state?.name;
            resourceInputs["projectId"] = state?.projectId;
            resourceInputs["region"] = state?.region;
            resourceInputs["resourceType"] = state?.resourceType;
            resourceInputs["runArguments"] = state?.runArguments;
            resourceInputs["runAsUser"] = state?.runAsUser;
            resourceInputs["runCommands"] = state?.runCommands;
            resourceInputs["runEnvVariables"] = state?.runEnvVariables;
            resourceInputs["runMode"] = state?.runMode;
            resourceInputs["runServiceAccount"] = state?.runServiceAccount;
            resourceInputs["runVolumeMounts"] = state?.runVolumeMounts;
            resourceInputs["scaleArraySpec"] = state?.scaleArraySpec;
            resourceInputs["scaleCpuLimit"] = state?.scaleCpuLimit;
            resourceInputs["scaleEphemeralStorageLimit"] = state?.scaleEphemeralStorageLimit;
            resourceInputs["scaleMaxExecutionTime"] = state?.scaleMaxExecutionTime;
            resourceInputs["scaleMemoryLimit"] = state?.scaleMemoryLimit;
            resourceInputs["scaleRetryLimit"] = state?.scaleRetryLimit;
        } else {
            const args = argsOrState as CodeEngineJobArgs | undefined;
            if (args?.imageReference === undefined && !opts.urn) {
                throw new Error("Missing required property 'imageReference'");
            }
            if (args?.projectId === undefined && !opts.urn) {
                throw new Error("Missing required property 'projectId'");
            }
            resourceInputs["imageReference"] = args?.imageReference;
            resourceInputs["imageSecret"] = args?.imageSecret;
            resourceInputs["name"] = args?.name;
            resourceInputs["projectId"] = args?.projectId;
            resourceInputs["runArguments"] = args?.runArguments;
            resourceInputs["runAsUser"] = args?.runAsUser;
            resourceInputs["runCommands"] = args?.runCommands;
            resourceInputs["runEnvVariables"] = args?.runEnvVariables;
            resourceInputs["runMode"] = args?.runMode;
            resourceInputs["runServiceAccount"] = args?.runServiceAccount;
            resourceInputs["runVolumeMounts"] = args?.runVolumeMounts;
            resourceInputs["scaleArraySpec"] = args?.scaleArraySpec;
            resourceInputs["scaleCpuLimit"] = args?.scaleCpuLimit;
            resourceInputs["scaleEphemeralStorageLimit"] = args?.scaleEphemeralStorageLimit;
            resourceInputs["scaleMaxExecutionTime"] = args?.scaleMaxExecutionTime;
            resourceInputs["scaleMemoryLimit"] = args?.scaleMemoryLimit;
            resourceInputs["scaleRetryLimit"] = args?.scaleRetryLimit;
            resourceInputs["build"] = undefined /*out*/;
            resourceInputs["buildRun"] = undefined /*out*/;
            resourceInputs["computedEnvVariables"] = undefined /*out*/;
            resourceInputs["createdAt"] = undefined /*out*/;
            resourceInputs["entityTag"] = undefined /*out*/;
            resourceInputs["etag"] = undefined /*out*/;
            resourceInputs["href"] = undefined /*out*/;
            resourceInputs["jobId"] = undefined /*out*/;
            resourceInputs["region"] = undefined /*out*/;
            resourceInputs["resourceType"] = undefined /*out*/;
        }
        opts = pulumi.mergeOptions(utilities.resourceOptsDefaults(), opts);
        super(CodeEngineJob.__pulumiType, name, resourceInputs, opts);
    }
}

/**
 * Input properties used for looking up and filtering CodeEngineJob resources.
 */
export interface CodeEngineJobState {
    /**
     * Reference to a build that is associated with the job.
     */
    build?: pulumi.Input<string>;
    /**
     * Reference to a build run that is associated with the job.
     */
    buildRun?: pulumi.Input<string>;
    /**
     * References to config maps, secrets or literal values, which are defined and set by Code Engine and are exposed as environment variables in the job run.
     */
    computedEnvVariables?: pulumi.Input<pulumi.Input<inputs.CodeEngineJobComputedEnvVariable>[]>;
    /**
     * The timestamp when the resource was created.
     */
    createdAt?: pulumi.Input<string>;
    /**
     * The version of the job instance, which is used to achieve optimistic locking.
     */
    entityTag?: pulumi.Input<string>;
    etag?: pulumi.Input<string>;
    /**
     * When you provision a new job,  a URL is created identifying the location of the instance.
     */
    href?: pulumi.Input<string>;
    /**
     * The name of the image that is used for this job. The format is `REGISTRY/NAMESPACE/REPOSITORY:TAG` where `REGISTRY` and `TAG` are optional. If `REGISTRY` is not specified, the default is `docker.io`. If `TAG` is not specified, the default is `latest`. If the image reference points to a registry that requires authentication, make sure to also specify the property `imageSecret`.
     */
    imageReference?: pulumi.Input<string>;
    /**
     * The name of the image registry access secret. The image registry access secret is used to authenticate with a private registry when you download the container image. If the image reference points to a registry that requires authentication, the job / job runs will be created but submitted job runs will fail, until this property is provided, too. This property must not be set on a job run, which references a job template.
     */
    imageSecret?: pulumi.Input<string>;
    /**
     * The identifier of the resource.
     */
    jobId?: pulumi.Input<string>;
    /**
     * The name of the job.
     */
    name?: pulumi.Input<string>;
    /**
     * The ID of the project.
     */
    projectId?: pulumi.Input<string>;
    /**
     * The region of the project the resource is located in. Possible values: 'au-syd', 'br-sao', 'ca-tor', 'eu-de', 'eu-gb', 'jp-osa', 'jp-tok', 'us-east', 'us-south'.
     */
    region?: pulumi.Input<string>;
    /**
     * The type of the job.
     */
    resourceType?: pulumi.Input<string>;
    /**
     * Set arguments for the job that are passed to start job run containers. If not specified an empty string array will be applied and the arguments specified by the container image, will be used to start the container.
     */
    runArguments?: pulumi.Input<pulumi.Input<string>[]>;
    /**
     * The user ID (UID) to run the job.
     */
    runAsUser?: pulumi.Input<number>;
    /**
     * Set commands for the job that are passed to start job run containers. If not specified an empty string array will be applied and the command specified by the container image, will be used to start the container.
     */
    runCommands?: pulumi.Input<pulumi.Input<string>[]>;
    /**
     * References to config maps, secrets or literal values, which are exposed as environment variables in the job run.
     */
    runEnvVariables?: pulumi.Input<pulumi.Input<inputs.CodeEngineJobRunEnvVariable>[]>;
    /**
     * The mode for runs of the job. Valid values are `task` and `daemon`. In `task` mode, the `maxExecutionTime` and `retryLimit` properties apply. In `daemon` mode, since there is no timeout and failed instances are restarted indefinitely, the `maxExecutionTime` and `retryLimit` properties are not allowed.
     */
    runMode?: pulumi.Input<string>;
    /**
     * The name of the service account. For built-in service accounts, you can use the shortened names `manager`, `none`, `reader`, and `writer`. This property must not be set on a job run, which references a job template.
     */
    runServiceAccount?: pulumi.Input<string>;
    /**
     * Optional mounts of config maps or secrets.
     */
    runVolumeMounts?: pulumi.Input<pulumi.Input<inputs.CodeEngineJobRunVolumeMount>[]>;
    /**
     * Define a custom set of array indices as a comma-separated list containing single values and hyphen-separated ranges, such as  5,12-14,23,27. Each instance gets its array index value from the environment variable JOB_INDEX. The number of unique array indices that you specify with this parameter determines the number of job instances to run.
     */
    scaleArraySpec?: pulumi.Input<string>;
    /**
     * Optional amount of CPU set for the instance of the job. For valid values see [Supported memory and CPU combinations](https://cloud.ibm.com/docs/codeengine?topic=codeengine-mem-cpu-combo).
     */
    scaleCpuLimit?: pulumi.Input<string>;
    /**
     * Optional amount of ephemeral storage to set for the instance of the job. The amount specified as ephemeral storage, must not exceed the amount of `scaleMemoryLimit`. The units for specifying ephemeral storage are Megabyte (M) or Gigabyte (G), whereas G and M are the shorthand expressions for GB and MB. For more information see [Units of measurement](https://cloud.ibm.com/docs/codeengine?topic=codeengine-mem-cpu-combo#unit-measurements).
     */
    scaleEphemeralStorageLimit?: pulumi.Input<string>;
    /**
     * The maximum execution time in seconds for runs of the job. This property can only be specified if `runMode` is `task`.
     */
    scaleMaxExecutionTime?: pulumi.Input<number>;
    /**
     * Optional amount of memory set for the instance of the job. For valid values see [Supported memory and CPU combinations](https://cloud.ibm.com/docs/codeengine?topic=codeengine-mem-cpu-combo). The units for specifying memory are Megabyte (M) or Gigabyte (G), whereas G and M are the shorthand expressions for GB and MB. For more information see [Units of measurement](https://cloud.ibm.com/docs/codeengine?topic=codeengine-mem-cpu-combo#unit-measurements).
     */
    scaleMemoryLimit?: pulumi.Input<string>;
    /**
     * The number of times to rerun an instance of the job before the job is marked as failed. This property can only be specified if `runMode` is `task`.
     */
    scaleRetryLimit?: pulumi.Input<number>;
}

/**
 * The set of arguments for constructing a CodeEngineJob resource.
 */
export interface CodeEngineJobArgs {
    /**
     * The name of the image that is used for this job. The format is `REGISTRY/NAMESPACE/REPOSITORY:TAG` where `REGISTRY` and `TAG` are optional. If `REGISTRY` is not specified, the default is `docker.io`. If `TAG` is not specified, the default is `latest`. If the image reference points to a registry that requires authentication, make sure to also specify the property `imageSecret`.
     */
    imageReference: pulumi.Input<string>;
    /**
     * The name of the image registry access secret. The image registry access secret is used to authenticate with a private registry when you download the container image. If the image reference points to a registry that requires authentication, the job / job runs will be created but submitted job runs will fail, until this property is provided, too. This property must not be set on a job run, which references a job template.
     */
    imageSecret?: pulumi.Input<string>;
    /**
     * The name of the job.
     */
    name?: pulumi.Input<string>;
    /**
     * The ID of the project.
     */
    projectId: pulumi.Input<string>;
    /**
     * Set arguments for the job that are passed to start job run containers. If not specified an empty string array will be applied and the arguments specified by the container image, will be used to start the container.
     */
    runArguments?: pulumi.Input<pulumi.Input<string>[]>;
    /**
     * The user ID (UID) to run the job.
     */
    runAsUser?: pulumi.Input<number>;
    /**
     * Set commands for the job that are passed to start job run containers. If not specified an empty string array will be applied and the command specified by the container image, will be used to start the container.
     */
    runCommands?: pulumi.Input<pulumi.Input<string>[]>;
    /**
     * References to config maps, secrets or literal values, which are exposed as environment variables in the job run.
     */
    runEnvVariables?: pulumi.Input<pulumi.Input<inputs.CodeEngineJobRunEnvVariable>[]>;
    /**
     * The mode for runs of the job. Valid values are `task` and `daemon`. In `task` mode, the `maxExecutionTime` and `retryLimit` properties apply. In `daemon` mode, since there is no timeout and failed instances are restarted indefinitely, the `maxExecutionTime` and `retryLimit` properties are not allowed.
     */
    runMode?: pulumi.Input<string>;
    /**
     * The name of the service account. For built-in service accounts, you can use the shortened names `manager`, `none`, `reader`, and `writer`. This property must not be set on a job run, which references a job template.
     */
    runServiceAccount?: pulumi.Input<string>;
    /**
     * Optional mounts of config maps or secrets.
     */
    runVolumeMounts?: pulumi.Input<pulumi.Input<inputs.CodeEngineJobRunVolumeMount>[]>;
    /**
     * Define a custom set of array indices as a comma-separated list containing single values and hyphen-separated ranges, such as  5,12-14,23,27. Each instance gets its array index value from the environment variable JOB_INDEX. The number of unique array indices that you specify with this parameter determines the number of job instances to run.
     */
    scaleArraySpec?: pulumi.Input<string>;
    /**
     * Optional amount of CPU set for the instance of the job. For valid values see [Supported memory and CPU combinations](https://cloud.ibm.com/docs/codeengine?topic=codeengine-mem-cpu-combo).
     */
    scaleCpuLimit?: pulumi.Input<string>;
    /**
     * Optional amount of ephemeral storage to set for the instance of the job. The amount specified as ephemeral storage, must not exceed the amount of `scaleMemoryLimit`. The units for specifying ephemeral storage are Megabyte (M) or Gigabyte (G), whereas G and M are the shorthand expressions for GB and MB. For more information see [Units of measurement](https://cloud.ibm.com/docs/codeengine?topic=codeengine-mem-cpu-combo#unit-measurements).
     */
    scaleEphemeralStorageLimit?: pulumi.Input<string>;
    /**
     * The maximum execution time in seconds for runs of the job. This property can only be specified if `runMode` is `task`.
     */
    scaleMaxExecutionTime?: pulumi.Input<number>;
    /**
     * Optional amount of memory set for the instance of the job. For valid values see [Supported memory and CPU combinations](https://cloud.ibm.com/docs/codeengine?topic=codeengine-mem-cpu-combo). The units for specifying memory are Megabyte (M) or Gigabyte (G), whereas G and M are the shorthand expressions for GB and MB. For more information see [Units of measurement](https://cloud.ibm.com/docs/codeengine?topic=codeengine-mem-cpu-combo#unit-measurements).
     */
    scaleMemoryLimit?: pulumi.Input<string>;
    /**
     * The number of times to rerun an instance of the job before the job is marked as failed. This property can only be specified if `runMode` is `task`.
     */
    scaleRetryLimit?: pulumi.Input<number>;
}
